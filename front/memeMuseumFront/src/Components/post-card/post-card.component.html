<div class="card" [routerLink]="['/post', post.id]">
  
  <div class="card-media">
    <video 
      *ngIf="isVideo(post.image_path); else imageBlock"
      [src]="imageUrl" 
      class="media-content"
      muted 
      loop 
      onmouseover="this.play()" 
      onmouseout="this.pause()"
      playsinline>
    </video>
 
    <ng-template #imageBlock>
      <img [src]="imageUrl" [alt]="post.title" loading="lazy" class="media-content">
    </ng-template>

    <div class="overlay">
      <span>Open Post</span>
    </div>
  </div>

  <div class="card-content">
    <h3 class="title">{{ post.title }}</h3>
    
    <div class="meta">
      <span class="author">&#64;{{ post.username }}</span>
      
      <div class="tags" *ngIf="parsedTags.length > 0">
        <span *ngFor="let tag of parsedTags.slice(0, 2)" class="tag-chip">
          #{{ tag }}
        </span>
        <span *ngIf="parsedTags.length > 2" class="more-tags">
          +{{ parsedTags.length - 2 }}
        </span>
      </div>
    </div>
  </div>

</div>